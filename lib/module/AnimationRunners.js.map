{"version":3,"sources":["AnimationRunners.ts"],"names":["Animated","Easing","Clock","Value","block","cond","stopClock","set","startClock","clockRunning","not","and","reTiming","timing","reDecay","decay","reSpring","spring","onInit","clock","sequence","animate","fn","state","config","from","finished","time","position","params","easing","linear","duration","to","frameTime","toValue","velocity","deceleration","springConfig","damping","mass","stiffness","overshootClamping","restSpeedThreshold","restDisplacementThreshold","delay","node","loop","loopConfig","boomerang","autoStart"],"mappings":"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","sourcesContent":["import Animated, { Easing } from \"react-native-reanimated\";\nimport { SpringConfig } from \"./Animations\";\n\nconst {\n  Clock,\n  Value,\n  block,\n  cond,\n  stopClock,\n  set,\n  startClock,\n  clockRunning,\n  not,\n  and,\n  timing: reTiming,\n  decay: reDecay,\n  spring: reSpring\n} = Animated;\n\ninterface AnimateParams<S, C> {\n  clock: Animated.Clock;\n  fn: (\n    clock: Animated.Clock,\n    state: S,\n    config: C\n  ) => Animated.Adaptable<number>;\n  state: S;\n  config: C;\n  from: Animated.Adaptable<number>;\n}\n\ninterface TimingAnimation {\n  state: Animated.TimingState;\n  config: Animated.TimingConfig;\n}\n\ninterface SpringAnimation {\n  state: Animated.SpringState;\n  config: Animated.SpringConfig;\n}\n\ninterface DecayAnimation {\n  state: Animated.DecayState;\n  config: Animated.DecayConfig;\n}\n\ntype Animation = SpringAnimation | DecayAnimation | TimingAnimation;\n\nconst onInit = (clock: Animated.Clock, sequence: Animated.Adaptable<number>) =>\n  cond(not(clockRunning(clock)), sequence);\n\nconst animate = <T extends Animation>({\n  fn,\n  clock,\n  state,\n  config,\n  from\n}: AnimateParams<T[\"state\"], T[\"config\"]>) =>\n  block([\n    onInit(clock, [\n      set(state.finished, 0),\n      set(state.time, 0),\n      set(state.position, from),\n      startClock(clock)\n    ]),\n    fn(clock, state, config),\n    cond(state.finished, stopClock(clock)),\n    state.position\n  ]);\n\nexport interface TimingParams {\n  clock?: Animated.Clock;\n  from?: Animated.Adaptable<number>;\n  to?: Animated.Adaptable<number>;\n  duration?: Animated.Adaptable<number>;\n  easing?: Animated.EasingFunction;\n}\n\nexport const timing = (params: TimingParams) => {\n  const { clock, easing, duration, from, to } = {\n    clock: new Clock(),\n    easing: Easing.linear,\n    duration: 250,\n    from: 0,\n    to: 1,\n    ...params\n  };\n\n  const state: Animated.TimingState = {\n    finished: new Value(0),\n    position: new Value(0),\n    time: new Value(0),\n    frameTime: new Value(0)\n  };\n\n  const config = {\n    toValue: new Value(0),\n    duration,\n    easing\n  };\n\n  return block([\n    onInit(clock, [set(config.toValue, to), set(state.frameTime, 0)]),\n    animate<TimingAnimation>({\n      clock,\n      fn: reTiming,\n      state,\n      config,\n      from\n    })\n  ]);\n};\n\nexport interface DecayParams {\n  clock?: Animated.Clock;\n  from?: Animated.Adaptable<number>;\n  velocity?: Animated.Value<number>;\n  deceleration?: Animated.Adaptable<number>;\n}\n\nexport const decay = (params: DecayParams) => {\n  const { clock, from, velocity, deceleration } = {\n    clock: new Clock(),\n    velocity: new Value(0),\n    deceleration: 0.998,\n    from: 0,\n    ...params\n  };\n\n  const state: Animated.DecayState = {\n    finished: new Value(0),\n    position: new Value(0),\n    time: new Value(0),\n    velocity: new Value(0)\n  };\n\n  const config: Animated.DecayConfig = {\n    deceleration\n  };\n\n  return block([\n    onInit(clock, [set(state.velocity, velocity)]),\n    animate<DecayAnimation>({\n      clock,\n      fn: reDecay,\n      state,\n      config,\n      from\n    })\n  ]);\n};\n\nexport interface SpringParams {\n  clock?: Animated.Clock;\n  from?: Animated.Adaptable<number>;\n  to: Animated.Adaptable<number>;\n  velocity?: Animated.Value<number>;\n  config?: SpringConfig;\n}\n\nexport const spring = (params: SpringParams) => {\n  const { clock, from, velocity, config: springConfig, to } = {\n    clock: new Clock(),\n    velocity: new Value(0),\n    from: 0,\n    ...params\n  };\n\n  const state: Animated.SpringState = {\n    finished: new Value(0),\n    position: new Value(0),\n    time: new Value(0),\n    velocity: new Value(0)\n  };\n\n  const config = {\n    toValue: new Value(0),\n    damping: 6,\n    mass: 1,\n    stiffness: 64,\n    overshootClamping: false,\n    restSpeedThreshold: 0.01,\n    restDisplacementThreshold: 0.01,\n    ...springConfig\n  };\n\n  return block([\n    onInit(clock, [set(config.toValue, to), set(state.velocity, velocity)]),\n    animate<SpringAnimation>({\n      clock,\n      fn: reSpring,\n      state,\n      config,\n      from\n    })\n  ]);\n};\n\nexport const delay = (node: Animated.Node<number>, duration: number) => {\n  const clock = new Clock();\n  return block([\n    timing({ clock, from: 0, to: 1, duration }),\n    cond(not(clockRunning(clock)), node)\n  ]);\n};\n\nexport interface LoopProps {\n  clock?: Animated.Clock;\n  easing?: Animated.EasingFunction;\n  duration?: number;\n  boomerang?: boolean;\n  autoStart?: boolean;\n}\n\nexport const loop = (loopConfig: LoopProps) => {\n  const { clock, easing, duration, boomerang, autoStart } = {\n    clock: new Clock(),\n    easing: Easing.linear,\n    duration: 250,\n    boomerang: false,\n    autoStart: true,\n    ...loopConfig\n  };\n  const state = {\n    finished: new Value(0),\n    position: new Value(0),\n    time: new Value(0),\n    frameTime: new Value(0)\n  };\n  const config = {\n    toValue: new Value(1),\n    duration,\n    easing\n  };\n\n  return block([\n    cond(and(not(clockRunning(clock)), autoStart ? 1 : 0), startClock(clock)),\n    reTiming(clock, state, config),\n    cond(state.finished, [\n      set(state.finished, 0),\n      set(state.time, 0),\n      set(state.frameTime, 0),\n      boomerang\n        ? set(config.toValue, cond(config.toValue, 0, 1))\n        : set(state.position, 0)\n    ]),\n    state.position\n  ]);\n};\n"]}